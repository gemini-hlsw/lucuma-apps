#!/bin/bash

# Check if apps-keys.txt is being staged for commit
if git diff --cached --name-only | grep -q "^apps-keys\.txt$"; then
    echo "   ERROR: apps-keys.txt cannot be committed!"
    echo "   This file contains private SOPS keys and must never be in git."
    echo ""
    echo "   To unstage: git reset HEAD apps-keys.txt"
    echo ""
    exit 1
fi

exit 0
